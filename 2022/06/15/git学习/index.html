<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>侬的杂货铺</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="01.git版本控制1.1 版本控制 本地版本控制：RCS。本地代码的版本控制。 集中式版本控制：svn。提供一个远端服务器来维护代码版本，本地不保存代码版本，解决多人协作的问题 分布式版本控制：Git。每个仓库都能记录版本历史，解决只有一个服务器保存版本的问题。  1.1.1 本地版本控制 最初的方式 通过本地复制文件夹，来完成版本控制，一般可以通过不同的文件名来区分版本    1.1.2 集中">
<meta property="og:type" content="article">
<meta property="og:title" content="侬的杂货铺">
<meta property="og:url" content="https://kdhello07.github.io/2022/06/15/git%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="侬的杂货铺">
<meta property="og:description" content="01.git版本控制1.1 版本控制 本地版本控制：RCS。本地代码的版本控制。 集中式版本控制：svn。提供一个远端服务器来维护代码版本，本地不保存代码版本，解决多人协作的问题 分布式版本控制：Git。每个仓库都能记录版本历史，解决只有一个服务器保存版本的问题。  1.1.1 本地版本控制 最初的方式 通过本地复制文件夹，来完成版本控制，一般可以通过不同的文件名来区分版本    1.1.2 集中">
<meta property="og:locale">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/20009a18333b4f1ebb56805f0fd10595~tplv-k3u1fbpfcp-watermark.image">
<meta property="og:image" content="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba048867983e4119b3bbc66901ada01e~tplv-k3u1fbpfcp-watermark.image">
<meta property="article:published_time" content="2022-06-15T01:23:40.000Z">
<meta property="article:modified_time" content="2022-06-15T01:23:40.000Z">
<meta property="article:author" content="Kevin he">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/20009a18333b4f1ebb56805f0fd10595~tplv-k3u1fbpfcp-watermark.image">
  
    <link rel="alternate" href="/atom.xml" title="侬的杂货铺" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.1.1"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">侬的杂货铺</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">技术、阅读、分享</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Suche"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Suche"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://kdhello07.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-git学习" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/06/15/git%E5%AD%A6%E4%B9%A0/" class="article-date">
  <time class="dt-published" datetime="2022-06-15T01:23:40.000Z" itemprop="datePublished">2022-06-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="01-git版本控制"><a href="#01-git版本控制" class="headerlink" title="01.git版本控制"></a>01.git版本控制</h1><h2 id="1-1-版本控制"><a href="#1-1-版本控制" class="headerlink" title="1.1 版本控制"></a>1.1 版本控制</h2><ul>
<li>本地版本控制：RCS。本地代码的版本控制。</li>
<li>集中式版本控制：svn。提供一个远端服务器来维护代码版本，本地不保存代码版本，解决多人协作的问题</li>
<li>分布式版本控制：Git。每个仓库都能记录版本历史，解决只有一个服务器保存版本的问题。</li>
</ul>
<h3 id="1-1-1-本地版本控制"><a href="#1-1-1-本地版本控制" class="headerlink" title="1.1.1 本地版本控制"></a>1.1.1 本地版本控制</h3><ul>
<li>最初的方式<ul>
<li>通过本地复制文件夹，来完成版本控制，一般可以通过不同的文件名来区分版本</li>
</ul>
</li>
</ul>
<h3 id="1-1-2-集中版本控制"><a href="#1-1-2-集中版本控制" class="headerlink" title="1.1.2 集中版本控制"></a>1.1.2 集中版本控制</h3><ul>
<li>基本原理：<ul>
<li>提供一个远端服务来保存文件，所有用户的提交都提交到该服务器中</li>
<li>增量保存每次提交的Diff,如果提交的增量中和远端现存的文件存在冲突，则需要本地提前解决冲突</li>
</ul>
</li>
<li>优点：<ul>
<li>学习简单，更容易操作</li>
<li>支持二进制文件，对大文件支持更友好</li>
</ul>
</li>
<li>缺点<ul>
<li>本地不存储版本管理的概念，所有提交都只能联上服务器后才可以提交</li>
<li>分支上的支持不够好，对于大型项目团队合作比较困难</li>
<li>用户本地不保存所有版本的代码，如果服务端故障容易导致历史版本的丢失</li>
</ul>
</li>
</ul>
<h3 id="1-1-3-分布式版本控制"><a href="#1-1-3-分布式版本控制" class="headerlink" title="1.1.3 分布式版本控制"></a>1.1.3 分布式版本控制</h3><ul>
<li>基本原理<ul>
<li>每个库都存有完整的提交历史，可以直接在本地进行代码提交</li>
<li>每次提交记录的都是完整的文件快照，而不是记录增量</li>
<li>通过Push等操作来完成和远端代码的同步</li>
</ul>
</li>
<li>优点<ul>
<li>分布式开发，每个库都是完整的提交历史，支持本地提交，强调个体</li>
<li>分支管理功能强大，方便团队合作，多人协同开发</li>
<li>校验和机制保证完整性，一般只添加数据，很少执行删除操作，不容易导致代码丢失。</li>
</ul>
</li>
<li>缺点<ul>
<li>相对SVN更复杂，学习成本高</li>
<li>对于大文件的支持不是特别好（git-lfs工具可以弥补这个功能）</li>
</ul>
</li>
</ul>
<h2 id="1-2-Git发展历史"><a href="#1-2-Git发展历史" class="headerlink" title="1.2 Git发展历史"></a>1.2 Git发展历史</h2><ul>
<li>github</li>
<li>gitlab</li>
<li>gitee</li>
</ul>
<h1 id="02-git的基本使用方式"><a href="#02-git的基本使用方式" class="headerlink" title="02 git的基本使用方式"></a>02 git的基本使用方式</h1><h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><ul>
<li>为什么我明明配置了Git配置，但是依然没有办法拉取代码？<ul>
<li>没有配置密钥，没有权限</li>
<li>免密认证没有配</li>
<li>instead of配置没有配，配的SSH免密配置，但是使用的还是HTTP协议访问</li>
</ul>
</li>
<li>为什么我Fetch了远端分支，但是我看本地当前的分支历史还是没有变化？<ul>
<li>只会更新origin的分支</li>
<li>fetch会把代码拉取到本地的远端分支，但是并不会合并到当前分支，所以当前分支历史没有变化</li>
</ul>
</li>
</ul>
<h2 id="2-1-Git目录介绍"><a href="#2-1-Git目录介绍" class="headerlink" title="2.1 Git目录介绍"></a>2.1 Git目录介绍</h2><ul>
<li>项目初始化<ul>
<li>mkdir demo</li>
<li>cd demo</li>
<li>git init</li>
</ul>
</li>
<li>其他参数  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">--initial-branch 初始化的分支</span><br><span class="line">--bare 创建一个裸仓库</span><br><span class="line">--template 可以通过模板来创建预先构建好的自定义git目录</span><br></pre></td></tr></table></figure></li>
<li>git仓库<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@dmtsai demo]<span class="comment"># tree .git</span></span><br><span class="line">.git</span><br><span class="line">├── branches</span><br><span class="line">├── config</span><br><span class="line">├── description</span><br><span class="line">├── HEAD</span><br><span class="line">├── hooks</span><br><span class="line">│   ├── applypatch-msg.sample</span><br><span class="line">│   ├── commit-msg.sample</span><br><span class="line">│   ├── post-update.sample</span><br><span class="line">│   ├── pre-applypatch.sample</span><br><span class="line">│   ├── pre-commit.sample</span><br><span class="line">│   ├── prepare-commit-msg.sample</span><br><span class="line">│   ├── pre-push.sample</span><br><span class="line">│   ├── pre-rebase.sample</span><br><span class="line">│   └── update.sample</span><br><span class="line">├── index</span><br><span class="line">├── info</span><br><span class="line">│   └── exclude</span><br><span class="line">├── objects</span><br><span class="line">│   ├── 3b</span><br><span class="line">│   │   └── 18e512dba79e4c8300dd08aeb37f8e728b8dad</span><br><span class="line">│   ├── info</span><br><span class="line">│   └── pack</span><br><span class="line">└── refs</span><br><span class="line">    ├── heads</span><br><span class="line">    └── tags</span><br><span class="line"></span><br><span class="line">10 directories, 15 files</span><br></pre></td></tr></table></figure>
<img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/20009a18333b4f1ebb56805f0fd10595~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></li>
</ul>
<h3 id="2-1-2-常见git配置"><a href="#2-1-2-常见git配置" class="headerlink" title="2.1.2 常见git配置"></a>2.1.2 常见git配置</h3><ul>
<li>用户名配置<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@dmtsai <span class="built_in">test</span>]<span class="comment"># git config --global user.name &quot;kdhelloa&quot;</span></span><br><span class="line">[root@dmtsai <span class="built_in">test</span>]<span class="comment"># git config --global user.email 1026789105@qq.com</span></span><br></pre></td></tr></table></figure></li>
<li>Git命令别名配置<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global alias.cin <span class="string">&quot;commit --amend --no-edit&quot;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-2-Git-Remote"><a href="#2-2-Git-Remote" class="headerlink" title="2.2 Git Remote"></a>2.2 Git Remote</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看remote</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git remote -v</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加Remote</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git remote add origin_ssh git@github.com:git/git.git</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git remote add origin_http https://github.com:git/git.git</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git remote -v</span></span><br><span class="line">origin_http	https://github.com:git/git.git (fetch)</span><br><span class="line">origin_http	https://github.com:git/git.git (push)</span><br><span class="line">origin_ssh	git@github.com:git/git.git (fetch)</span><br><span class="line">origin_ssh	git@github.com:git/git.git (push)</span><br></pre></td></tr></table></figure>
<ul>
<li>同一个Origin设置不同的Push和Fetch URL<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@dmtsai demo]<span class="comment"># git remote add origin git@github.com:git/git.git</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git remote set-url --add --push origin git@github.com:my_repo/git.git</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git remote -v</span></span><br><span class="line">origin	git@github.com:git/git.git (fetch)</span><br><span class="line">origin	git@github.com:my_repo/git.git (push)</span><br><span class="line">origin_http	https://github.com:git/git.git (fetch)</span><br><span class="line">origin_http	https://github.com:git/git.git (push)</span><br><span class="line">origin_ssh	git@github.com:git/git.git (fetch)</span><br><span class="line">origin_ssh	git@github.com:git/git.git (push)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="2-2-1-HTTP-Remote"><a href="#2-2-1-HTTP-Remote" class="headerlink" title="2.2.1 HTTP Remote"></a>2.2.1 HTTP Remote</h3><h3 id="2-2-1-SSH-Remote"><a href="#2-2-1-SSH-Remote" class="headerlink" title="2.2.1 SSH Remote"></a>2.2.1 SSH Remote</h3><h3 id="2-2-2-配置github的公私钥验证。"><a href="#2-2-2-配置github的公私钥验证。" class="headerlink" title="2.2.2 配置github的公私钥验证。"></a>2.2.2 配置github的公私钥验证。</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@dmtsai demo]<span class="comment"># ssh-keygen -t ed25519 -C &quot;1026789105@qq.com&quot;</span></span><br></pre></td></tr></table></figure>
<h2 id="2-3-Git-Add"><a href="#2-3-Git-Add" class="headerlink" title="2.3 Git Add"></a>2.3 Git Add</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">[root@dmtsai demo]<span class="comment"># touch readme.md</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># vim readme.md</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git status</span></span><br><span class="line"><span class="comment"># 位于分支 master</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 初始提交</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 未跟踪的文件:</span></span><br><span class="line"><span class="comment">#   （使用 &quot;git add &lt;file&gt;...&quot; 以包含要提交的内容）</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#	readme.md</span></span><br><span class="line">提交为空，但是存在尚未跟踪的文件（使用 <span class="string">&quot;git add&quot;</span> 建立跟踪）</span><br><span class="line">[root@dmtsai demo]<span class="comment"># git add .</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git status</span></span><br><span class="line"><span class="comment"># 位于分支 master</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 初始提交</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># 要提交的变更：</span></span><br><span class="line"><span class="comment">#   （使用 &quot;git rm --cached &lt;file&gt;...&quot; 撤出暂存区）</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#	新文件：    readme.md</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># tree .git</span></span><br><span class="line">.git</span><br><span class="line">├── branches</span><br><span class="line">├── config</span><br><span class="line">├── description</span><br><span class="line">├── HEAD</span><br><span class="line">├── hooks</span><br><span class="line">│   ├── applypatch-msg.sample</span><br><span class="line">│   ├── commit-msg.sample</span><br><span class="line">│   ├── post-update.sample</span><br><span class="line">│   ├── pre-applypatch.sample</span><br><span class="line">│   ├── pre-commit.sample</span><br><span class="line">│   ├── prepare-commit-msg.sample</span><br><span class="line">│   ├── pre-push.sample</span><br><span class="line">│   ├── pre-rebase.sample</span><br><span class="line">│   └── update.sample</span><br><span class="line">├── index</span><br><span class="line">├── info</span><br><span class="line">│   └── exclude</span><br><span class="line">├── objects</span><br><span class="line">│   ├── 3b</span><br><span class="line">│   │   └── 18e512dba79e4c8300dd08aeb37f8e728b8dad</span><br><span class="line">│   ├── info</span><br><span class="line">│   └── pack</span><br><span class="line">└── refs</span><br><span class="line">    ├── heads</span><br><span class="line">    └── tags</span><br><span class="line"></span><br><span class="line">10 directories, 15 files</span><br><span class="line">[root@dmtsai demo]<span class="comment"># git cat-file -p 3b18e512dba79e4c8300dd08aeb37f8e728b8dad</span></span><br><span class="line">hello world</span><br></pre></td></tr></table></figure>
<h2 id="2-4-git-commit"><a href="#2-4-git-commit" class="headerlink" title="2.4 git commit"></a>2.4 git commit</h2><ul>
<li>将修改过的文件进行提交<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">[root@dmtsai demo]<span class="comment"># git commit -m &quot;add readme&quot;</span></span><br><span class="line">[master（根提交） 0eecbc6] add readme</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"> create mode 100644 readme.md</span><br><span class="line">[root@dmtsai demo]<span class="comment"># tree .git</span></span><br><span class="line">.git</span><br><span class="line">├── branches</span><br><span class="line">├── COMMIT_EDITMSG</span><br><span class="line">├── config</span><br><span class="line">├── description</span><br><span class="line">├── HEAD</span><br><span class="line">├── hooks</span><br><span class="line">│   ├── applypatch-msg.sample</span><br><span class="line">│   ├── commit-msg.sample</span><br><span class="line">│   ├── post-update.sample</span><br><span class="line">│   ├── pre-applypatch.sample</span><br><span class="line">│   ├── pre-commit.sample</span><br><span class="line">│   ├── prepare-commit-msg.sample</span><br><span class="line">│   ├── pre-push.sample</span><br><span class="line">│   ├── pre-rebase.sample</span><br><span class="line">│   └── update.sample</span><br><span class="line">├── index</span><br><span class="line">├── info</span><br><span class="line">│   └── exclude</span><br><span class="line">├── logs</span><br><span class="line">│   ├── HEAD</span><br><span class="line">│   └── refs</span><br><span class="line">│       └── heads</span><br><span class="line">│           └── master</span><br><span class="line">├── objects</span><br><span class="line">│   ├── 0e</span><br><span class="line">│   │   └── ecbc6b9742fc3eba018b9f34b5a4f5c391b988</span><br><span class="line">│   ├── 3b</span><br><span class="line">│   │   └── 18e512dba79e4c8300dd08aeb37f8e728b8dad</span><br><span class="line">│   ├── 73</span><br><span class="line">│   │   └── 94b8cc9ca916312a79ce8078c34b49b1617718</span><br><span class="line">│   ├── info</span><br><span class="line">│   └── pack</span><br><span class="line">└── refs</span><br><span class="line">    ├── heads</span><br><span class="line">    │   └── master</span><br><span class="line">    └── tags</span><br><span class="line"></span><br><span class="line">15 directories, 21 files</span><br><span class="line">[root@dmtsai demo]<span class="comment"># git cat-file -p 7394b8cc9ca916312a79ce8078c34b49b1617718</span></span><br><span class="line">100644 blob 3b18e512dba79e4c8300dd08aeb37f8e728b8dad	readme.md</span><br><span class="line">[root@dmtsai demo]<span class="comment"># git cat-file -p 0eecbc6b9742fc3eba018b9f34b5a4f5c391b988</span></span><br><span class="line">tree 7394b8cc9ca916312a79ce8078c34b49b1617718</span><br><span class="line">author kdhelloa &lt;1026789105@qq.com&gt; 1653386601 +0800</span><br><span class="line">committer kdhelloa &lt;1026789105@qq.com&gt; 1653386601 +0800</span><br><span class="line"></span><br><span class="line">add readme</span><br><span class="line">[root@dmtsai demo]<span class="comment"># git log</span></span><br><span class="line">commit 0eecbc6b9742fc3eba018b9f34b5a4f5c391b988</span><br><span class="line">Author: kdhelloa &lt;1026789105@qq.com&gt;</span><br><span class="line">Date:   Tue May 24 18:03:21 2022 +0800</span><br><span class="line"></span><br><span class="line">    add readme</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="2-5-Objects"><a href="#2-5-Objects" class="headerlink" title="2.5 Objects"></a>2.5 Objects</h2><ul>
<li>commit | tree | blod 在git里面都统一称为Object,除此之外还有个tag的object</li>
<li>Blob：存储文件的内容</li>
<li>tree：存储文件的目录信息</li>
<li>commit：存储提交信息，一个commit可以对应唯一版本的代码</li>
<li>如何把这三个信息串联在一起呢？<ol>
<li>通过commit寻找到tree信息，每个commit都会存储对应的Tree ID</li>
<li>通过tree存储的信息，获取到对应的目录树信息</li>
<li>从tree中获得blob的ID,通过blob ID获取对应的文件内容</li>
</ol>
</li>
</ul>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba048867983e4119b3bbc66901ada01e~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<h2 id="2-6-Refs"><a href="#2-6-Refs" class="headerlink" title="2.6 Refs"></a>2.6 Refs</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 切换到新分支</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git checkout -b test</span></span><br><span class="line">切换到一个新分支 <span class="string">&#x27;test&#x27;</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># tree .git</span></span><br><span class="line">.git</span><br><span class="line">├── branches</span><br><span class="line">├── COMMIT_EDITMSG</span><br><span class="line">├── config</span><br><span class="line">├── description</span><br><span class="line">├── HEAD</span><br><span class="line">├── hooks</span><br><span class="line">│   ├── applypatch-msg.sample</span><br><span class="line">│   ├── commit-msg.sample</span><br><span class="line">│   ├── post-update.sample</span><br><span class="line">│   ├── pre-applypatch.sample</span><br><span class="line">│   ├── pre-commit.sample</span><br><span class="line">│   ├── prepare-commit-msg.sample</span><br><span class="line">│   ├── pre-push.sample</span><br><span class="line">│   ├── pre-rebase.sample</span><br><span class="line">│   └── update.sample</span><br><span class="line">├── index</span><br><span class="line">├── info</span><br><span class="line">│   └── exclude</span><br><span class="line">├── logs</span><br><span class="line">│   ├── HEAD</span><br><span class="line">│   └── refs</span><br><span class="line">│       └── heads</span><br><span class="line">│           ├── master</span><br><span class="line">│           └── <span class="built_in">test</span></span><br><span class="line">├── objects</span><br><span class="line">│   ├── 0e</span><br><span class="line">│   │   └── ecbc6b9742fc3eba018b9f34b5a4f5c391b988</span><br><span class="line">│   ├── 3b</span><br><span class="line">│   │   └── 18e512dba79e4c8300dd08aeb37f8e728b8dad</span><br><span class="line">│   ├── 73</span><br><span class="line">│   │   └── 94b8cc9ca916312a79ce8078c34b49b1617718</span><br><span class="line">│   ├── info</span><br><span class="line">│   └── pack</span><br><span class="line">└── refs</span><br><span class="line">    ├── heads</span><br><span class="line">    │   ├── master</span><br><span class="line">    │   └── <span class="built_in">test</span></span><br><span class="line">    └── tags</span><br><span class="line"></span><br><span class="line">15 directories, 23 files</span><br></pre></td></tr></table></figure>
<ul>
<li>refs文件存储的内容<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@dmtsai demo]<span class="comment"># cat .git/refs/heads/master </span></span><br><span class="line">0eecbc6b9742fc3eba018b9f34b5a4f5c391b988</span><br><span class="line">[root@dmtsai demo]<span class="comment"># cat .git/refs/heads/test</span></span><br><span class="line">0eecbc6b9742fc3eba018b9f34b5a4f5c391b988</span><br></pre></td></tr></table></figure></li>
<li>refs的内容就是对应的commit ID</li>
<li>因此把ref当作指针，指向对应的commit来表示当前ref对应的版本</li>
<li>不同种类的ref<ul>
<li>refs&#x2F;heads 前缀表示的是分支</li>
<li>除此之外还有其他种类的ref。 refs&#x2F;tags 前缀表示的是标签</li>
</ul>
</li>
<li><strong>branch 分支</strong><ul>
<li>分支一般用于开发阶段，是可以不断添加commit进行迭代的<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@dmtsai demo]<span class="comment"># git checkout -b test</span></span><br><span class="line">切换到一个新分支 <span class="string">&#x27;test&#x27;</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>tag 标签<ul>
<li>标签一般表示的是一个稳定版本，指向的commit一般不会变更<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#通过git tag 命令生成tag.</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git tag v0.0.1</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># tree .git</span></span><br><span class="line">.git</span><br><span class="line">├── branches</span><br><span class="line">├── COMMIT_EDITMSG</span><br><span class="line">├── config</span><br><span class="line">├── description</span><br><span class="line">├── HEAD</span><br><span class="line">├── hooks</span><br><span class="line">│   ├── applypatch-msg.sample</span><br><span class="line">│   ├── commit-msg.sample</span><br><span class="line">│   ├── post-update.sample</span><br><span class="line">│   ├── pre-applypatch.sample</span><br><span class="line">│   ├── pre-commit.sample</span><br><span class="line">│   ├── prepare-commit-msg.sample</span><br><span class="line">│   ├── pre-push.sample</span><br><span class="line">│   ├── pre-rebase.sample</span><br><span class="line">│   └── update.sample</span><br><span class="line">├── index</span><br><span class="line">├── info</span><br><span class="line">│   └── exclude</span><br><span class="line">├── logs</span><br><span class="line">│   ├── HEAD</span><br><span class="line">│   └── refs</span><br><span class="line">│       └── heads</span><br><span class="line">│           ├── master</span><br><span class="line">│           └── <span class="built_in">test</span></span><br><span class="line">├── objects</span><br><span class="line">│   ├── 0e</span><br><span class="line">│   │   └── ecbc6b9742fc3eba018b9f34b5a4f5c391b988</span><br><span class="line">│   ├── 3b</span><br><span class="line">│   │   └── 18e512dba79e4c8300dd08aeb37f8e728b8dad</span><br><span class="line">│   ├── 73</span><br><span class="line">│   │   └── 94b8cc9ca916312a79ce8078c34b49b1617718</span><br><span class="line">│   ├── info</span><br><span class="line">│   └── pack</span><br><span class="line">└── refs</span><br><span class="line">    ├── heads</span><br><span class="line">    │   ├── master</span><br><span class="line">    │   └── <span class="built_in">test</span></span><br><span class="line">    └── tags</span><br><span class="line">        └── v0.0.1</span><br><span class="line"></span><br><span class="line">15 directories, 24 files</span><br><span class="line">[root@dmtsai demo]<span class="comment"># cat .git/refs/tags/v0.0.1 </span></span><br><span class="line">0eecbc6b9742fc3eba018b9f34b5a4f5c391b988</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="2-7-Annotation-Tag"><a href="#2-7-Annotation-Tag" class="headerlink" title="2.7 Annotation Tag"></a>2.7 Annotation Tag</h2><ul>
<li>什么是附注标签<ul>
<li>一种特殊的标签，可以给Tag提供一些额外的信息</li>
</ul>
</li>
<li>如何创建附注标签<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 通过git tag -a 命令来完成附注标签的创建</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git tag -a v0.0.2 -m &quot;add feature 1&quot;</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># tree .git</span></span><br><span class="line">.git</span><br><span class="line">├── branches</span><br><span class="line">├── COMMIT_EDITMSG</span><br><span class="line">├── config</span><br><span class="line">├── description</span><br><span class="line">├── HEAD</span><br><span class="line">├── hooks</span><br><span class="line">│   ├── applypatch-msg.sample</span><br><span class="line">│   ├── commit-msg.sample</span><br><span class="line">│   ├── post-update.sample</span><br><span class="line">│   ├── pre-applypatch.sample</span><br><span class="line">│   ├── pre-commit.sample</span><br><span class="line">│   ├── prepare-commit-msg.sample</span><br><span class="line">│   ├── pre-push.sample</span><br><span class="line">│   ├── pre-rebase.sample</span><br><span class="line">│   └── update.sample</span><br><span class="line">├── index</span><br><span class="line">├── info</span><br><span class="line">│   └── exclude</span><br><span class="line">├── logs</span><br><span class="line">│   ├── HEAD</span><br><span class="line">│   └── refs</span><br><span class="line">│       └── heads</span><br><span class="line">│           ├── master</span><br><span class="line">│           └── <span class="built_in">test</span></span><br><span class="line">├── objects</span><br><span class="line">│   ├── 0e</span><br><span class="line">│   │   └── ecbc6b9742fc3eba018b9f34b5a4f5c391b988</span><br><span class="line">│   ├── 3b</span><br><span class="line">│   │   └── 18e512dba79e4c8300dd08aeb37f8e728b8dad</span><br><span class="line">│   ├── 4c</span><br><span class="line">│   │   └── 4341fe5161c9951eaff90b07a5f923e2d3026b</span><br><span class="line">│   ├── 73</span><br><span class="line">│   │   └── 94b8cc9ca916312a79ce8078c34b49b1617718</span><br><span class="line">│   ├── info</span><br><span class="line">│   └── pack</span><br><span class="line">└── refs</span><br><span class="line">    ├── heads</span><br><span class="line">    │   ├── master</span><br><span class="line">    │   └── <span class="built_in">test</span></span><br><span class="line">    └── tags</span><br><span class="line">        ├── v0.0.1</span><br><span class="line">        └── v0.0.2</span><br><span class="line"></span><br><span class="line">16 directories, 26 files</span><br><span class="line">[root@dmtsai demo]<span class="comment"># cat .git/refs/tags/v0.0.2</span></span><br><span class="line">4c4341fe5161c9951eaff90b07a5f923e2d3026b</span><br><span class="line"><span class="comment"># 这是第四种object信息</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git cat-file -p 4c4341fe5161c9951eaff90b07a5f923e2d3026b</span></span><br><span class="line">object 0eecbc6b9742fc3eba018b9f34b5a4f5c391b988</span><br><span class="line"><span class="built_in">type</span> commit</span><br><span class="line">tag v0.0.2</span><br><span class="line">tagger kdhelloa &lt;1026789105@qq.com&gt; 1653388503 +0800</span><br><span class="line"></span><br><span class="line">add feature 1</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="2-8-追溯历史版本"><a href="#2-8-追溯历史版本" class="headerlink" title="2.8 追溯历史版本"></a>2.8 追溯历史版本</h2><ul>
<li>获取当前版本代码<ul>
<li>通过ref指向的commit可以获取唯一的代码版本</li>
</ul>
</li>
<li>获取历史版本代码<ul>
<li>commit里面会存有parent commit字段，通过commit的串联获取历史版本代码<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">[root@dmtsai demo]<span class="comment"># git branch</span></span><br><span class="line">  master</span><br><span class="line">* <span class="built_in">test</span></span><br><span class="line"><span class="comment"># 修改更新 readme.md文件</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># vim readme.md </span></span><br><span class="line"><span class="comment"># add修改文件</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git add .</span></span><br><span class="line"><span class="comment"># 提交修改的文件</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git commit -m &quot;update readme&quot;</span></span><br><span class="line">[<span class="built_in">test</span> ba9ab4e] update readme</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br><span class="line"><span class="comment"># 查看更新后文件目录结构。新增了 一个tree object,一个 blob object,一个commit object</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># tree .git</span></span><br><span class="line">.git</span><br><span class="line">├── branches</span><br><span class="line">├── COMMIT_EDITMSG</span><br><span class="line">├── config</span><br><span class="line">├── description</span><br><span class="line">├── HEAD</span><br><span class="line">├── hooks</span><br><span class="line">│   ├── applypatch-msg.sample</span><br><span class="line">│   ├── commit-msg.sample</span><br><span class="line">│   ├── post-update.sample</span><br><span class="line">│   ├── pre-applypatch.sample</span><br><span class="line">│   ├── pre-commit.sample</span><br><span class="line">│   ├── prepare-commit-msg.sample</span><br><span class="line">│   ├── pre-push.sample</span><br><span class="line">│   ├── pre-rebase.sample</span><br><span class="line">│   └── update.sample</span><br><span class="line">├── index</span><br><span class="line">├── info</span><br><span class="line">│   └── exclude</span><br><span class="line">├── logs</span><br><span class="line">│   ├── HEAD</span><br><span class="line">│   └── refs</span><br><span class="line">│       └── heads</span><br><span class="line">│           ├── master</span><br><span class="line">│           └── <span class="built_in">test</span></span><br><span class="line">├── objects</span><br><span class="line">│   ├── 0e</span><br><span class="line">│   │   └── ecbc6b9742fc3eba018b9f34b5a4f5c391b988</span><br><span class="line">│   ├── 2b</span><br><span class="line">│   │   └── e7c65ae93b54b988416f280298b0b8b5f20385</span><br><span class="line">│   ├── 38</span><br><span class="line">│   │   └── 6eb799bbfd0826f510b6587c5afaae2a962279</span><br><span class="line">│   ├── 3b</span><br><span class="line">│   │   └── 18e512dba79e4c8300dd08aeb37f8e728b8dad</span><br><span class="line">│   ├── 4c</span><br><span class="line">│   │   └── 4341fe5161c9951eaff90b07a5f923e2d3026b</span><br><span class="line">│   ├── 73</span><br><span class="line">│   │   └── 94b8cc9ca916312a79ce8078c34b49b1617718</span><br><span class="line">│   ├── ba</span><br><span class="line">│   │   └── 9ab4eee8a009eeeb52028069192963ecc30657</span><br><span class="line">│   ├── info</span><br><span class="line">│   └── pack</span><br><span class="line">└── refs</span><br><span class="line">    ├── heads</span><br><span class="line">    │   ├── master</span><br><span class="line">    │   └── <span class="built_in">test</span></span><br><span class="line">    └── tags</span><br><span class="line">        ├── v0.0.1</span><br><span class="line">        └── v0.0.2</span><br><span class="line"></span><br><span class="line">19 directories, 29 files</span><br><span class="line"><span class="comment"># 查看git commit的操作日志</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git log</span></span><br><span class="line">commit ba9ab4eee8a009eeeb52028069192963ecc30657</span><br><span class="line">Author: kdhelloa &lt;1026789105@qq.com&gt;</span><br><span class="line">Date:   Tue May 24 18:45:17 2022 +0800</span><br><span class="line"></span><br><span class="line">    update readme</span><br><span class="line"></span><br><span class="line">commit 0eecbc6b9742fc3eba018b9f34b5a4f5c391b988</span><br><span class="line">Author: kdhelloa &lt;1026789105@qq.com&gt;</span><br><span class="line">Date:   Tue May 24 18:03:21 2022 +0800</span><br><span class="line"></span><br><span class="line">    add readme</span><br><span class="line"><span class="comment"># 通过查看update readme操作中这个新增的commit object来获取新增的tree object</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git cat-file -p ba9ab4eee8a009eeeb52028069192963ecc30657</span></span><br><span class="line">tree 386eb799bbfd0826f510b6587c5afaae2a962279</span><br><span class="line">parent 0eecbc6b9742fc3eba018b9f34b5a4f5c391b988</span><br><span class="line">author kdhelloa &lt;1026789105@qq.com&gt; 1653389117 +0800</span><br><span class="line">committer kdhelloa &lt;1026789105@qq.com&gt; 1653389117 +0800</span><br><span class="line"></span><br><span class="line">update readme</span><br><span class="line"><span class="comment"># 通过新增的tree object来查看新增的blob这个object</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git cat-file -p 386eb799bbfd0826f510b6587c5afaae2a962279</span></span><br><span class="line">100644 blob 2be7c65ae93b54b988416f280298b0b8b5f20385	readme.md</span><br><span class="line"><span class="comment"># 通过新增的blob object 来查看存储的文件内容</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git cat-file -p 2be7c65ae93b54b988416f280298b0b8b5f20385</span></span><br><span class="line"><span class="comment"># hello world</span></span><br><span class="line"><span class="comment"># update redame中commit object里面有一个parent commit字段，通过commit的串联获取历史版本代码</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git cat-file -p 0eecbc6b9742fc3eba018b9f34b5a4f5c391b988</span></span><br><span class="line">tree 7394b8cc9ca916312a79ce8078c34b49b1617718</span><br><span class="line">author kdhelloa &lt;1026789105@qq.com&gt; 1653386601 +0800</span><br><span class="line">committer kdhelloa &lt;1026789105@qq.com&gt; 1653386601 +0800</span><br><span class="line"></span><br><span class="line">add readme</span><br><span class="line">[root@dmtsai demo]<span class="comment"># git cat-file -p 7394b8cc9ca916312a79ce8078c34b49b1617718</span></span><br><span class="line">100644 blob 3b18e512dba79e4c8300dd08aeb37f8e728b8dad	readme.md</span><br><span class="line">[root@dmtsai demo]<span class="comment"># git cat-file -p 3b18e512dba79e4c8300dd08aeb37f8e728b8dad</span></span><br><span class="line">hello world</span><br><span class="line"><span class="comment"># test ref指向新的commit</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># cat .git/refs/heads/test </span></span><br><span class="line">ba9ab4eee8a009eeeb52028069192963ecc30657</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="2-9-修改历史版本"><a href="#2-9-修改历史版本" class="headerlink" title="2.9 修改历史版本"></a>2.9 修改历史版本</h2><ul>
<li>commit –amend<ul>
<li>通过这个命令可以修改最近一次的commit信息，修改之后commit id会变。但是commit object里面的tree字段与parent字段不会发生改变<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@dmtsai demo]<span class="comment"># git commit --amend</span></span><br><span class="line">[<span class="built_in">test</span> 9a6b509] update readme!!!</span><br><span class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</span><br><span class="line">[root@dmtsai demo]<span class="comment"># git log</span></span><br><span class="line">commit 9a6b5096f1f7e889cf871db03fd1c6c22d9f5c48</span><br><span class="line">Author: kdhelloa &lt;1026789105@qq.com&gt;</span><br><span class="line">Date:   Tue May 24 18:45:17 2022 +0800</span><br><span class="line"></span><br><span class="line">    update readme!!!</span><br><span class="line"></span><br><span class="line">commit 0eecbc6b9742fc3eba018b9f34b5a4f5c391b988</span><br><span class="line">Author: kdhelloa &lt;1026789105@qq.com&gt;</span><br><span class="line">Date:   Tue May 24 18:03:21 2022 +0800</span><br><span class="line"></span><br><span class="line">    add readme</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li>rebase<ul>
<li>通过 git rebase -i HEAD~3 可以实现对最近三个commit的修改<ol>
<li>合并commit</li>
<li>修改具体的commit message</li>
<li>删除某个commit</li>
</ol>
</li>
</ul>
</li>
<li>filter –branch<ul>
<li>该命令可以指定删除所有提交中的某个文件或者全局修改邮箱地址等操作</li>
</ul>
</li>
</ul>
<h2 id="2-10-Objects"><a href="#2-10-Objects" class="headerlink" title="2.10 Objects"></a>2.10 Objects</h2><ul>
<li>新增的Object<ul>
<li>修改commit后，我们可以发现git object又出现了变化。新增了修改后的commit object，但是之前的commit object并没有被删除。</li>
</ul>
</li>
<li>悬空的Object<ul>
<li>例如上面那个Object，顾名思义就是没有ref指向的object<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可以通过下面这条命令来查找悬空的Object</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git fsck --lost-found</span></span><br><span class="line">Checking object directories: 100% (256/256), <span class="keyword">done</span>.</span><br><span class="line">dangling commit ba9ab4eee8a009eeeb52028069192963ecc30657</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="2-11-git-gc"><a href="#2-11-git-gc" class="headerlink" title="2.11 git gc"></a>2.11 git gc</h2><ul>
<li>GC<ul>
<li>通过git gc命令，可以删除一些不需要的Object(例如悬空的object),以及会对object进行一些打包压缩来减少仓库的体积</li>
</ul>
</li>
<li>reflog<ul>
<li>reflog是用于记录操作日志，防止误操作后数据丢失。通过reflog来找到丢失的数据，手动将日志设置为过期</li>
</ul>
</li>
<li>指定时间<ul>
<li>git gc prune&#x3D;now 指定的是修剪多久之前的对象，默认是两周前<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">[root@dmtsai demo]<span class="comment"># git reflog expire --expire=now --all</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git gc --prune=now</span></span><br><span class="line">Counting objects: 7, <span class="keyword">done</span>.</span><br><span class="line">Delta compression using up to 2 threads.</span><br><span class="line">Compressing objects: 100% (3/3), <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (7/7), <span class="keyword">done</span>.</span><br><span class="line">Total 7 (delta 0), reused 0 (delta 0)</span><br><span class="line">[root@dmtsai demo]<span class="comment"># git fsck --lost-found</span></span><br><span class="line">Checking object directories: 100% (256/256), <span class="keyword">done</span>.</span><br><span class="line">Checking objects: 100% (7/7), <span class="keyword">done</span>.</span><br><span class="line">[root@dmtsai demo]<span class="comment"># tree .git</span></span><br><span class="line">.git</span><br><span class="line">├── branches</span><br><span class="line">├── COMMIT_EDITMSG</span><br><span class="line">├── config</span><br><span class="line">├── description</span><br><span class="line">├── HEAD</span><br><span class="line">├── hooks</span><br><span class="line">│   ├── applypatch-msg.sample</span><br><span class="line">│   ├── commit-msg.sample</span><br><span class="line">│   ├── post-update.sample</span><br><span class="line">│   ├── pre-applypatch.sample</span><br><span class="line">│   ├── pre-commit.sample</span><br><span class="line">│   ├── prepare-commit-msg.sample</span><br><span class="line">│   ├── pre-push.sample</span><br><span class="line">│   ├── pre-rebase.sample</span><br><span class="line">│   └── update.sample</span><br><span class="line">├── index</span><br><span class="line">├── info</span><br><span class="line">│   ├── exclude</span><br><span class="line">│   └── refs</span><br><span class="line">├── logs</span><br><span class="line">│   ├── HEAD</span><br><span class="line">│   └── refs</span><br><span class="line">│       └── heads</span><br><span class="line">│           ├── master</span><br><span class="line">│           └── <span class="built_in">test</span></span><br><span class="line">├── lost-found</span><br><span class="line">│   └── commit</span><br><span class="line">│       └── ba9ab4eee8a009eeeb52028069192963ecc30657</span><br><span class="line">├── objects</span><br><span class="line">│   ├── info</span><br><span class="line">│   │   └── packs</span><br><span class="line">│   └── pack</span><br><span class="line">│       ├── pack-891f2b138ece528aa7a2733f2d6e98c0e7bc5f34.idx</span><br><span class="line">│       └── pack-891f2b138ece528aa7a2733f2d6e98c0e7bc5f34.pack</span><br><span class="line">├── packed-refs</span><br><span class="line">└── refs</span><br><span class="line">    ├── heads</span><br><span class="line">    └── tags</span><br><span class="line"></span><br><span class="line">14 directories, 24 files</span><br><span class="line">[root@dmtsai demo]<span class="comment"># git cat-file -p ba9ab4eee8a009eeeb52028069192963ecc30657</span></span><br><span class="line">error: unable to find ba9ab4eee8a009eeeb52028069192963ecc30657</span><br><span class="line">fatal: Not a valid object name ba9ab4eee8a009eeeb52028069192963ecc30657</span><br><span class="line"><span class="comment"># 可以查看压缩后的内容</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># cat .git/packed-refs </span></span><br><span class="line"><span class="comment"># pack-refs with: peeled fully-peeled </span></span><br><span class="line">0eecbc6b9742fc3eba018b9f34b5a4f5c391b988 refs/heads/master</span><br><span class="line">9a6b5096f1f7e889cf871db03fd1c6c22d9f5c48 refs/heads/test</span><br><span class="line">0eecbc6b9742fc3eba018b9f34b5a4f5c391b988 refs/tags/v0.0.1</span><br><span class="line">4c4341fe5161c9951eaff90b07a5f923e2d3026b refs/tags/v0.0.2</span><br><span class="line">^0eecbc6b9742fc3eba018b9f34b5a4f5c391b988</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="2-12git的完整视图"><a href="#2-12git的完整视图" class="headerlink" title="2.12git的完整视图"></a>2.12git的完整视图</h2><p>就是通过一个commit object可以查看到一个完整的版本代码。一个commit object会有tree字段和parent字段，tree字段又可以找到blob字段，继而找到代码。通过parent字段可以可以历史版本代码。</p>
<h2 id="2-13-git-clone-pull-fetch"><a href="#2-13-git-clone-pull-fetch" class="headerlink" title="2.13 git clone &amp; pull &amp; fetch"></a>2.13 git clone &amp; pull &amp; fetch</h2><ul>
<li>clone<ul>
<li>拉取完整的仓库到本地目录，可以指定分支，深度</li>
</ul>
</li>
<li>fetch<ul>
<li>将远端某些分支代码最新代码拉取到本地，不会执行merge操作，会修改refs&#x2F;remote内的分支信息，如果需要和本地代码合并需要执行手动操作。</li>
</ul>
</li>
<li>pull<ul>
<li>拉取远端某分支，并和本地代码进行合并，操作等同于git fetch + git merge,也可以通过 git pull –rebase 完成git fetch + git rebase操作</li>
<li>可能存在冲突，需要解决冲突</li>
</ul>
</li>
</ul>
<h2 id="2-14-git-push"><a href="#2-14-git-push" class="headerlink" title="2.14 git push"></a>2.14 git push</h2><ul>
<li>push<ul>
<li>git push是将本地代码同步至远端的方式</li>
</ul>
</li>
<li>常用命令<ul>
<li>一般使用 git push origin master命令即可完成</li>
</ul>
</li>
<li>冲突问题<ol>
<li>如果本地的commit记录和远端的commit历史不一致，则会产生冲突，比如 git commit –amend or git rebase 都有可能导致这个问题</li>
<li>如果该分支就自己一个人使用，或者团队确认过可以修改历史则可以通过git push origin master -f来完成强制推送，一般不推荐主干（master）分支进行该操作，正常都应该解决冲突后再进行push(推送)。</li>
</ol>
</li>
<li>推送规则限制<ul>
<li>可以通过保护分支，来配置一些保护规则，防止误操作，或者一些不合规的操作出现，导致代码丢失。</li>
</ul>
</li>
</ul>
<h1 id="3-git研发流程"><a href="#3-git研发流程" class="headerlink" title="3.git研发流程"></a>3.git研发流程</h1><h2 id="3-0常见问题"><a href="#3-0常见问题" class="headerlink" title="3.0常见问题"></a>3.0常见问题</h2><ul>
<li>在gerrit平台上使用merge的方式合入代码<ul>
<li>不推荐，因为gerrit是集中式平台</li>
</ul>
</li>
<li>不了解保护分支，Code Review CI等概念，研发流程不规范<ul>
<li>保护分支：防止用户直接向主干分支提交代码，必须经过PR(pull request)来进行合入。</li>
<li>code review,CI:都是在合入前检查策略，Code Review是人工进行检查，CI则是通过一些定制化的脚本来进行一些校验</li>
</ul>
</li>
<li>代码历史混乱，代码合并方式不清晰<ul>
<li>不理解Fase forward和three way merge的区别，本地代码更新频繁的使用three way的方式，导致生成过多的Merge节点，是提交历史变得复杂不清晰</li>
</ul>
</li>
</ul>
<h2 id="3-1-不同的工作流"><a href="#3-1-不同的工作流" class="headerlink" title="3.1 不同的工作流"></a>3.1 不同的工作流</h2><ul>
<li>类型<ul>
<li>集中式工作流。代表平台：Gerrit&#x2F;SVN。特点：只依托于主干分支进行开发，不存在其他分支。合入方式：Fast-forward.</li>
<li>分支管理工作流。代表平台：Github&#x2F;gitlab。特点：可以定义不同特性的开发分支，上线分支，在开发分支完成开发后再通过MR&#x2F;PR合入主干分支。合入方式：自定义，Fast-Forward or Three-Way Merge都可以</li>
</ul>
</li>
</ul>
<h2 id="3-2-集中式工作流"><a href="#3-2-集中式工作流" class="headerlink" title="3.2 集中式工作流"></a>3.2 集中式工作流</h2><ul>
<li>只依托于master分支进行研发活动</li>
<li>工作方式<ol>
<li>获取远端master代码</li>
<li>直接在master分支完成修改</li>
<li>提交前拉去最新的master代码和本地代码进行合并（使用rebase）,如果有冲突需要解决冲突。</li>
<li>提交本地代码到master.</li>
</ol>
</li>
</ul>
<h2 id="3-3-分支管理工作流"><a href="#3-3-分支管理工作流" class="headerlink" title="3.3 分支管理工作流"></a>3.3 分支管理工作流</h2><ul>
<li>git flow ：分支类型丰富</li>
<li>GitHub flow：只有主干分支和开发分支，规则简单</li>
<li>gitlab flow：在主干分支和开发分支之构建环境分支，版本分支，满足不同发布 or 环境的需要</li>
</ul>
<h3 id="3-3-2-github-flow"><a href="#3-3-2-github-flow" class="headerlink" title="3.3.2 github flow"></a>3.3.2 github flow</h3><ul>
<li>github 的工作流，只有一个主干分支，基于pull request往主干分支中提交代码</li>
<li>选择团队合作的方式<ol>
<li>owner创建好仓库后，其他用户通过fork的方式来创建自己的仓库，并在fork的仓库上进行开发</li>
<li>owner创建好仓库后，统一给团队内成员 分配权限，直接在同一个仓库内进行开发</li>
</ol>
</li>
<li>github上操作流程<ol>
<li><p>在github上新建一个repository。并clone到本地</p>
</li>
<li><p>创建一个pull request</p>
<ol>
<li>创建一个main主分支</li>
<li>创建一个feature分支</li>
<li>可以通过进行一些保护分支设置，来限制合入的策略，以及限制直接的push操作</li>
</ol>
</li>
</ol>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@dmtsai ~]<span class="comment"># git clone git@github.com:kdhelloa/demo.git</span></span><br><span class="line">正克隆到 <span class="string">&#x27;demo&#x27;</span>...</span><br><span class="line">Enter passphrase <span class="keyword">for</span> key <span class="string">&#x27;/root/.ssh/id_rsa&#x27;</span>: </span><br><span class="line">warning: 您似乎克隆了一个空版本库。</span><br><span class="line">[root@dmtsai demo]<span class="comment"># vim readme.md</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git add .</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git commit -m &quot;add readme&quot;</span></span><br><span class="line">[master（根提交） 99fd23f] add readme</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"> create mode 100644 readme.md</span><br><span class="line"> [root@dmtsai demo]<span class="comment"># git branch -m master main</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git push origin main</span></span><br><span class="line">Enter passphrase <span class="keyword">for</span> key <span class="string">&#x27;/root/.ssh/id_rsa&#x27;</span>: </span><br><span class="line">Counting objects: 3, <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (3/3), 218 bytes | 0 bytes/s, <span class="keyword">done</span>.</span><br><span class="line">Total 3 (delta 0), reused 0 (delta 0)</span><br><span class="line">To git@github.com:kdhelloa/demo.git</span><br><span class="line"> * [new branch]      main -&gt; main</span><br><span class="line"> </span><br><span class="line"> <span class="comment"># 创建一个新分支feature,并进入到feature分支</span></span><br><span class="line"> [root@dmtsai demo]<span class="comment"># git checkout -b feature</span></span><br><span class="line">切换到一个新分支 <span class="string">&#x27;feature&#x27;</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># vim readme.md</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git add .</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git commit -m &quot;update readme&quot;</span></span><br><span class="line">[feature ab09033] update readme</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line">[root@dmtsai demo]<span class="comment"># git push origin feature</span></span><br><span class="line">Enter passphrase <span class="keyword">for</span> key <span class="string">&#x27;/root/.ssh/id_rsa&#x27;</span>: </span><br><span class="line">Counting objects: 5, <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (3/3), 270 bytes | 0 bytes/s, <span class="keyword">done</span>.</span><br><span class="line">Total 3 (delta 0), reused 0 (delta 0)</span><br><span class="line">remote: </span><br><span class="line">remote: Create a pull request <span class="keyword">for</span> <span class="string">&#x27;feature&#x27;</span> on GitHub by visiting:</span><br><span class="line">remote:      https://github.com/kdhelloa/demo/pull/new/feature</span><br><span class="line">remote: </span><br><span class="line">To git@github.com:kdhelloa/demo.git</span><br><span class="line"> * [new branch]      feature -&gt; feature</span><br><span class="line"> <span class="comment"># 在浏览器打开上面那个remote地址 https://github.com/kdhelloa/demo/pull/new/feature，然后进行一个创建</span></span><br></pre></td></tr></table></figure>
<ul>
<li>在push时出现问题的解决办法<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@dmtsai demo]<span class="comment"># git push origin main</span></span><br><span class="line">Enter passphrase <span class="keyword">for</span> key <span class="string">&#x27;/root/.ssh/id_rsa&#x27;</span>: </span><br><span class="line">error: src refspec main does not match any.</span><br><span class="line">error: 无法推送一些引用到 <span class="string">&#x27;git@github.com:kdhelloa/demo.git&#x27;</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git branch</span></span><br><span class="line">* master</span><br><span class="line"><span class="comment"># 修改分支名称</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git branch -m master main</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git push origin main</span></span><br><span class="line">Enter passphrase <span class="keyword">for</span> key <span class="string">&#x27;/root/.ssh/id_rsa&#x27;</span>: </span><br><span class="line">Counting objects: 3, <span class="keyword">done</span>.</span><br><span class="line">Writing objects: 100% (3/3), 218 bytes | 0 bytes/s, <span class="keyword">done</span>.</span><br><span class="line">Total 3 (delta 0), reused 0 (delta 0)</span><br><span class="line">To git@github.com:kdhelloa/demo.git</span><br><span class="line"> * [new branch]      main -&gt; main</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-3-2-gitlab-flow"><a href="#3-3-2-gitlab-flow" class="headerlink" title="3.3.2 gitlab flow"></a>3.3.2 gitlab flow</h3><ul>
<li>推荐的工作六是在gitflow和github flow上做出优化，即保持了单一主分支的间接，又可以适应不同的开发环境</li>
<li>原则：upstream first 上游优先<ul>
<li>只有在上游分支采纳的代码才可以进入到下游分支，一般上游分支就是master</li>
</ul>
</li>
</ul>
<h2 id="3-4-代码合并"><a href="#3-4-代码合并" class="headerlink" title="3.4 代码合并"></a>3.4 代码合并</h2><ul>
<li>fast-forward[[root@dmtsai demo]# git merge test –ff-only]<ul>
<li>不会产生一个merge节点，合并后保持一个线性历史，如果target分支有了更新，则需要通过rebase操作更新source branch后才可以合入。</li>
</ul>
</li>
<li>three-way merge<ul>
<li>三方合并，会产生新的merge节点[[root@dmtsai demo]# git merge test –no-ff]<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@dmtsai demo]<span class="comment"># git checkout -b test</span></span><br><span class="line">切换到一个新分支 <span class="string">&#x27;test&#x27;</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># ls</span></span><br><span class="line">readme.md</span><br><span class="line">[root@dmtsai demo]<span class="comment"># vim readme.md </span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git add .</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git commit -m &quot;test&quot;</span></span><br><span class="line">[<span class="built_in">test</span> dafd462] <span class="built_in">test</span></span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line">[root@dmtsai demo]<span class="comment"># git checkout main</span></span><br><span class="line">切换到分支 <span class="string">&#x27;main&#x27;</span></span><br><span class="line">[root@dmtsai demo]<span class="comment"># git merge test --ff-only</span></span><br><span class="line">更新 ba4f142..dafd462</span><br><span class="line">Fast-forward</span><br><span class="line"> readme.md | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h2 id="3-5-如何选择合适的工作流"><a href="#3-5-如何选择合适的工作流" class="headerlink" title="3.5 如何选择合适的工作流"></a>3.5 如何选择合适的工作流</h2><ul>
<li>针对小型团队，推荐使用github工作流即可<ol>
<li>尽量保证少量多次，最好不要一次性提交上千行代码</li>
<li>提交pull request后最少需要保证有cr（check request）后再合入</li>
<li>主干分支尽量保持整洁，使用fast-forward合入方式，合入前进行rebase</li>
</ol>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kdhello07.github.io/2022/06/15/git%E5%AD%A6%E4%B9%A0/" data-id="clrv16wj70004z5kua3b4d26j" data-title="" class="article-share-link"><span class="fa fa-share">Teilen</span></a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/06/15/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Neuer</strong>
      <div class="article-nav-title">
        
          (no title)
        
      </div>
    </a>
  
  
    <a href="/2022/06/15/etcdRaft%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Älter</strong>
      <div class="article-nav-title"></div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Kategorien</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B5%8B%E8%AF%95/">测试</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA/" rel="tag">个人</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B5%8B%E8%AF%95/" rel="tag">测试</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/%E4%B8%AA%E4%BA%BA/" style="font-size: 10px;">个人</a> <a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 10px;">测试</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/01/">January 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">letzter Beitrag</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/01/27/test/">test</a>
          </li>
        
          <li>
            <a href="/2024/01/26/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2022/06/15/docker%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">(no title)</a>
          </li>
        
          <li>
            <a href="/2022/06/15/git%E5%AD%A6%E4%B9%A0/">(no title)</a>
          </li>
        
          <li>
            <a href="/2022/06/15/etcdRaft%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 Kevin he<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>